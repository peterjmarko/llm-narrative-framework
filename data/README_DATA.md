# Data Directory

This directory contains all data files used in the project, organized by their role in the data preparation pipeline. The structure is designed to follow the flow of data from raw sources to the final, experiment-ready database.

## Directory Structure

```
data/
│
├── README.md                   # This file.
├── base_query.txt              # LLM prompt template for the matching task.
├── personalities_db.txt        # FINAL PRODUCT: The main database used in experiments.
│
├── sources/
│   ├── adb_raw_export.txt          # Static, raw data dump (for replication).
│   └── adb_raw_export_fetched.txt  # Raw data from the automated fetching script.
│
├── reports/
│   ├── adb_validation_report.csv
│   └── missing_eminence_scores.txt
│
├── foundational_assets/
│   ├── neutralized_delineations/   # Sanitized text snippets for database assembly.
│   ├── sf_chart_export.csv         # Chart data exported from Solar Fire (manual step).
│   ├── sf_delineations_library.txt # The original, raw delineations exported from Solar Fire.
│   ├── country_codes.csv           # Mapping of ADB country/state codes to full names.
│   ├── eminence_scores.csv         # Static scores used for final subject selection.
│   ├── point_weights.csv           # Configurable weights for planets/points.
│   └── balance_thresholds.csv      # Configurable thresholds for balance calculations.
│
├── intermediate/
│   ├── adb_filtered_5000.txt   # The 5,000 subjects after initial filtering.
│   └── sf_data_import.txt      # Subjects formatted for Solar Fire import.
│
├── processed/
│   └── subject_db.csv          # Cleaned, integrated master database ready for generation.
│
└── backup/
    └── ... (timestamped backups) # Automatic backups of generated databases.
```

## File Descriptions by Directory

### 1. `sources/` - Raw Data

This directory contains the original, unprocessed starting points for the pipeline.

-   **`adb_raw_export.txt`**: The static, raw data dump from Astro-Databank. **This file is required for bit-for-bit replication of the original study.**
-   **`adb_raw_export_fetched.txt`**: A richer, more detailed raw data file generated by the automated `fetch_adb_data.py` script. This is the starting point for new research.

### 2. `reports/` - Validation & Audit Files

These files are generated during the data validation and filtering stages.

-   **`adb_validation_report.csv`**: A static report generated by auditing the raw data against live Wikipedia pages. It is used as a master filter by `filter_adb_candidates.py` to ensure reproducibility.
-   **`missing_eminence_scores.txt`**: A log of subjects who were excluded from the final selection pool because they lacked an eminence score.

### 3. `foundational_assets/` - Static Assets for Generation

These files are static, pre-prepared assets that provide the rules and content for generating the final personality descriptions.

-   **`eminence_scores.csv`**: Contains the pre-computed eminence score for each candidate, used to rank and select the final 5,000 subjects.
-   **`country_codes.csv`**: A mapping file to resolve country/state abbreviations found in the raw data.
-   **`sf_delineations_library.txt`**: The raw, complete library of interpretive text as exported from Solar Fire, before neutralization.
-   **`neutralized_delineations/`**: A directory containing the sanitized, de-jargonized description components, ready for assembly. This is the output of the manual LLM neutralization process.
-   **`sf_chart_export.csv`**: The raw data exported from Solar Fire after it has processed the subjects. This is the output of a manual step in the pipeline.
-   **`point_weights.csv` & `balance_thresholds.csv`**: Configuration files that define the core logic for the personality classification algorithm in `generate_database.py`.

### 4. `intermediate/` - Pipeline Artifacts

These files are the outputs of one pipeline script and the inputs to the next.

-   **`adb_filtered_5000.txt`**: The output of `filter_adb_candidates.py`. It contains the top 5,000 subjects selected from the raw data.
-   **`sf_data_import.txt`**: The output of `prepare_sf_import.py`. This file is formatted for import into the Solar Fire software.

### 5. `processed/` - Cleaned Master Database

This directory holds the cleaned and integrated master data file, ready for the final generation step.

-   **`subject_db.csv`**: The output of `create_subject_db.py`. This script integrates multiple source files, fixes character encoding errors, and produces this clean, UTF-8 encoded master CSV.

### 6. Top-Level Files - Main Experiment Files

These are the final, high-level files used directly in the LLM experiments.

-   **`personalities_db.txt`**: This is the final, primary database used in all experiments. It is generated by `generate_personalities_db.py` from `processed/subject_db.csv`. It is a tab-delimited file containing the `Index`, `Name`, `BirthYear`, and the fully assembled, neutralized `DescriptionText`.
-   **`base_query.txt`**: A text file containing the prompt template for the LLM matching task.