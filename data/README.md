# Data Directory

This directory contains all data files used in the project, organized by their role in the data preparation pipeline. The structure is designed to follow the flow of data from raw sources to the final, experiment-ready database.

## Directory Structure

```
data/
│
├── README.md                   # This file.
├── base_query.txt              # LLM prompt template for the matching task.
├── personalities_db.txt        # FINAL PRODUCT: The main database used in experiments.
│
├── sources/
│   └── adb_raw_export.txt      # The initial, unprocessed data dump from Astro-Databank.
│
├── reports/
│   ├── adb_validation_report.csv
│   └── missing_eminence_scores.txt
│
├── foundational_assets/
│   ├── neutralized_delineations/ # Sanitized text snippets for database assembly.
│   ├── eminence_scores.csv       # Static scores used for final subject selection.
│   ├── point_weights.csv         # Configurable weights for planets/points.
│   └── ... (other config files)
│
├── intermediate/
│   ├── adb_filtered_5000.txt   # The 5,000 subjects after initial filtering.
│   ├── sf_data_import.txt      # Subjects formatted for Solar Fire import.
│   └── sf_chart_export.csv     # Chart data exported from Solar Fire.
│
├── processed/
│   └── subject_db.csv          # Cleaned, integrated master database ready for generation.
│
└── backup/
    └── ... (timestamped backups) # Automatic backups of generated databases.
```

## File Descriptions by Directory

### 1. `sources/` - Raw Data

This directory contains the original, unprocessed starting point for the entire pipeline.

-   **`adb_raw_export.txt`**: The raw, tab-delimited data dump of ~10,000 individuals from the Astro-Databank research database.

### 2. `reports/` - Validation & Audit Files

These files are generated during the data validation and filtering stages.

-   **`adb_validation_report.csv`**: A static report generated by auditing the raw data against live Wikipedia pages to confirm names and death dates. It is used as a filter by `filter_adb_candidates.py`.
-   **`missing_eminence_scores.txt`**: A log of subjects who were excluded from the final selection pool because they lacked an eminence score.

### 3. `foundational_assets/` - Static Assets for Generation

These files are static, pre-prepared assets that provide the rules and content for generating the final personality descriptions.

-   **`eminence_scores.csv`**: Contains the eminence score for each valid candidate, used to sort and select the final top 5,000 subjects.
-   **`point_weights.csv` & `balance_thresholds.csv`**: Configuration files that define the core logic for the personality classification algorithm.
-   **`neutralized_delineations/`**: A directory containing CSV files of sanitized, third-person textual descriptions. These were created by using an LLM to rewrite esoteric jargon into neutral language.

### 4. `intermediate/` - Pipeline Artifacts

These files are the outputs of one pipeline step and the inputs to the next.

-   **`adb_filtered_5000.txt`**: The output of `filter_adb_candidates.py`. It contains the top 5,000 subjects selected from the raw data.
-   **`sf_data_import.txt`**: The output of `prepare_sf_import.py`. This file is formatted for import into the Solar Fire software.
-   **`sf_chart_export.csv`**: The raw data exported from Solar Fire after it has processed the subjects. This file often has character encoding issues.

### 5. `processed/` - Cleaned Master Database

This directory holds the cleaned and integrated master data file, ready for the final generation step.

-   **`subject_db.csv`**: The output of `create_subject_database.py`. This script takes the various intermediate files (especially `sf_chart_export.csv`), integrates them, fixes character encoding errors, and produces this clean, UTF-8 encoded master CSV file.

### 6. Top-Level Files - Main Experiment Files

These are the final, high-level files used directly in the LLM experiments.

-   **`personalities_db.txt`**: This is the final, primary database used in all experiments. It is generated by `generate_database.py` from `processed/subject_db.csv`. It is a tab-delimited file containing the `Index`, `Name`, `BirthYear`, and the fully assembled, neutralized `DescriptionText`.
-   **`base_query.txt`**: A text file containing the prompt template for the LLM matching task.