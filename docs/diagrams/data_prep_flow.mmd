graph LR
    subgraph "Data Sources"
        D_country[country_codes.csv]
    end

    subgraph "Pipeline Scripts"
        S_fetch[src/fetch_adb_data.py]
        S_validate[src/validate_adb_data.py]
        S_eminence[src/generate_eminence_scores.py]
        S_ocean[src/generate_ocean_scores.py]
        S_filter[src/filter_adb_candidates.py]
        S_prepare[src/prepare_sf_import.py]
        S_create[src/create_subject_db.py]
        S_generate[src/generate_personalities_db.py]
    end

    subgraph "Manual / External Processes"
        P_sf["Solar Fire Software"]
        P_llm["LLM Neutralization"]
    end

    subgraph "Data Artifacts"
        A_raw{adb_raw_export.txt}
        B_cat_map{adb_category_map.csv}
        C_report{adb_validation_report.csv}
        D_summary{adb_validation_summary.txt}
        C_eminence{eminence_scores.csv}
        D_ocean{ocean_scores.csv}
        E_filtered{adb_filtered_final.txt}
        F_import{sf_data_import.txt}
        G_export_chart{sf_chart_export.csv}
        H_export_delineations{sf_delineations_library.txt}
        I_neutralized{neutralized_delineations/}
        J_subject{subject_db.csv}
    end

    subgraph "Final Product"
        K_final((personalities_db.txt))
    end

    S_fetch --> A_raw
    S_fetch --> B_cat_map
    
    A_raw --> S_validate
    S_validate --> C_report
    S_validate --> D_summary
    
    A_raw --> S_eminence
    S_eminence --> C_eminence
    
    A_raw & C_eminence --> S_ocean
    S_ocean --> D_ocean

    A_raw & C_report & D_ocean & C_eminence & D_country --> S_filter
    S_filter --> E_filtered

    E_filtered --> S_prepare
    S_prepare --> F_import

    F_import --> P_sf
    P_sf --> G_export_chart
    P_sf --> H_export_delineations
    
    H_export_delineations --> P_llm
    P_llm --> I_neutralized

    G_export_chart & E_filtered --> S_create
    S_create --> J_subject
    
    J_subject & I_neutralized --> S_generate
    S_generate --> K_final

    style D_country fill:#cde4ff,stroke:#6c93be
    
    style S_fetch fill:#d4edda,stroke:#155724
    style S_validate fill:#d4edda,stroke:#155724
    style S_eminence fill:#d4edda,stroke:#155724
    style S_ocean fill:#d4edda,stroke:#155724
    style S_filter fill:#d4edda,stroke:#155724
    style S_prepare fill:#d4edda,stroke:#155724
    style S_create fill:#d4edda,stroke:#155724
    style S_generate fill:#d4edda,stroke:#155724

    style P_sf fill:#fdebd0,stroke:#e59866
    style P_llm fill:#fdebd0,stroke:#e59866

    style A_raw fill:#fef9e7,stroke:#b08d57
    style B_cat_map fill:#fef9e7,stroke:#b08d57
    style C_report fill:#fef9e7,stroke:#b08d57
    style D_summary fill:#fef9e7,stroke:#b08d57
    style C_eminence fill:#fef9e7,stroke:#b08d57
    style D_ocean fill:#fef9e7,stroke:#b08d57
    style E_filtered fill:#fef9e7,stroke:#b08d57
    style F_import fill:#fef9e7,stroke:#b08d57
    style G_export_chart fill:#fef9e7,stroke:#b08d57
    style H_export_delineations fill:#fef9e7,stroke:#b08d57
    style I_neutralized fill:#fef9e7,stroke:#b08d57
    style J_subject fill:#fef9e7,stroke:#b08d57

    style K_final fill:#a3e4d7,stroke:#0e6251
    