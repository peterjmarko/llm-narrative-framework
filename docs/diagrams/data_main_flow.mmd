graph TD
    subgraph "Input Data"
        Input_PDB["personalities_db.txt"]
        Input_Query["base_query.txt"]
        Input_Config["config.ini"]
    end

    subgraph "Pipeline Scripts"
        Script1["build_llm_queries.py"]
        Script2["llm_prompter.py"]
        Script3["process_llm_responses.py"]
        Script4["analyze_llm_performance.py"]
        Script5["run_bias_analysis.py"]
        Script6["generate_replication_report.py"]
        Script7["compile_replication_results.py"]
        Script8["compile_experiment_results.py"]
        Script9["compile_study_results.py"]
        Script10["study_analyzer.py"]
    end

    subgraph "Data Artifacts"
        Art_archive[("config.ini.archived")]
        Art_query["llm_query_XXX.txt"]
        Art_manifest[("manifest.txt")]
        Art_response["llm_response_XXX.txt"]
        Art_scores["all_scores.txt"]
        Art_metrics[("replication_metrics.json")]
        Art_report["replication_report.txt"]
        Art_rep_results[("REPLICATION_results.csv")]
        Art_exp_results[("EXPERIMENT_results.csv")]
        Art_study_results[("STUDY_results.csv")]
        Art_batch_log[("batch_run_log.csv")]
    end
    
    subgraph "Final Output"
        FinalOutputs(("STUDY_analysis_log.txt<br/>Boxplots/<br/>Diagnostics/"))
    end

    %% --- Data Flow Connections ---
    Input_PDB & Input_Query & Input_Config --> Script1
    Input_Config --> Art_archive
    Script1 --> Art_query
    Script1 --> Art_manifest
    Art_query --> Script2
    Script2 --> Art_response
    Art_response & Art_manifest --> Script3
    Script3 --> Art_scores
    Art_scores & Art_archive --> Script4
    Script4 --> Art_metrics
    Art_metrics --> Script5
    Art_metrics & Art_archive & Input_Query --> Script6
    Script6 --> Art_report
    Art_report --> Art_batch_log
    Art_metrics & Art_archive --> Script7
    Script7 --> Art_rep_results
    Art_rep_results --> Script8
    Script8 --> Art_exp_results
    Art_exp_results --> Script9
    Script9 --> Art_study_results
    Art_study_results --> Script10
    Script10 --> FinalOutputs

    %% --- Inline Styling ---
    style Input_PDB fill:#cde4ff,stroke:#6c93be
    style Input_Query fill:#cde4ff,stroke:#6c93be
    style Input_Config fill:#cde4ff,stroke:#6c93be
    
    style Script1 fill:#fff3cd,stroke:#f1c40f
    style Script2 fill:#fff3cd,stroke:#f1c40f
    style Script3 fill:#fff3cd,stroke:#f1c40f
    style Script4 fill:#fff3cd,stroke:#f1c40f
    style Script5 fill:#fff3cd,stroke:#f1c40f
    style Script6 fill:#fff3cd,stroke:#f1c40f
    style Script7 fill:#fff3cd,stroke:#f1c40f
    style Script8 fill:#fff3cd,stroke:#f1c40f
    style Script9 fill:#fff3cd,stroke:#f1c40f
    style Script10 fill:#fff3cd,stroke:#f1c40f

    style Art_archive fill:#e9ecef,stroke:#adb5bd
    style Art_query fill:#e9ecef,stroke:#adb5bd
    style Art_manifest fill:#e9ecef,stroke:#adb5bd
    style Art_response fill:#e9ecef,stroke:#adb5bd
    style Art_scores fill:#e9ecef,stroke:#adb5bd
    style Art_metrics fill:#e9ecef,stroke:#adb5bd
    style Art_report fill:#e9ecef,stroke:#adb5bd
    style Art_rep_results fill:#e9ecef,stroke:#adb5bd
    style Art_exp_results fill:#e9ecef,stroke:#adb5bd
    style Art_study_results fill:#e9ecef,stroke:#adb5bd
    style Art_batch_log fill:#e9ecef,stroke:#adb5bd
    
    style FinalOutputs fill:#d4edda,stroke:#155724
    