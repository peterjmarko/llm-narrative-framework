graph TD
    subgraph "Stage 1: Sourcing & Validation"
        A[Fetch Raw Data<br>src/fetch_adb_data.py] --> B[Validate Data<br>src/validate_adb_data.py];
    end

    subgraph "Stage 2: Pre-filtering & Scoring"
        B --> C[Select Eligible Candidates<br>src/select_eligible_candidates.py];
        C --> D[Generate Eminence Scores<br>src/generate_eminence_scores.py];
        D --> E[Generate OCEAN Scores<br>src/generate_ocean_scores.py];
    end

    subgraph "Stage 3: Final Selection"
        E --> F[Select Final Candidates<br>src/select_final_candidates.py];
    end

    subgraph "Stage 4: Manual Chart Calculation"
        F --> G[Prepare for SF Import<br>src/prepare_sf_import.py];
        G --> H((Use Solar Fire Software));
        style H fill:#f9f,stroke:#333,stroke-width:2px;
    end
    
    subgraph "Stage 5: Automated Neutralization"
        I[Neutralize Delineations<br>src/neutralize_delineations.py]
    end

    subgraph "Stage 6: Final Database Generation"
        H --> J[Create Subject DB<br>src/create_subject_db.py];
        I --> K[Generate Personalities DB<br>src/generate_personalities_db.py];
        J --> K
    end
    