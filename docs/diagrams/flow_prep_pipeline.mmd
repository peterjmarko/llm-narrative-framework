graph TD
    subgraph "Automated Pipeline"
        F[src/filter_adb_candidates.py]
        H[src/prepare_sf_import.py]
        S[src/create_subject_db.py]
        N[src/generate_personalities_db.py]
    end

    subgraph "Manual & External Processes"
        I[Use Solar Fire Software]
        L[Use LLM to Neutralize Text]
    end
    
    subgraph "Inputs & Foundational Assets"
        B_raw{adb_raw_export.txt}
        Q_report{adb_validation_report.csv}
        E_scores{eminence_scores.csv}
        G_filtered{adb_filtered_5000.txt}
        J_export{sf_chart_export.csv}
        K_lib{sf_delineations_library.txt}
        M_neut{neutralized_delineations/}
        R_db{subject_db.csv}
    end

    subgraph "Final Output"
        O((personalities_db.txt))
    end

    B_raw -- "(static input)" --> F
    Q_report -- "(used by)" --> F
    E_scores -- "(used by)" --> F
    F --> G_filtered
    G_filtered --> H
    
    H --> I
    I --> J_export
    I --> K_lib

    K_lib --> L
    L --> M_neut
    
    J_export --> S
    S --> R_db
    
    R_db --> N
    M_neut --> N
    N --> O

    style F fill:#d4edda,stroke:#155724
    style H fill:#d4edda,stroke:#155724
    style S fill:#d4edda,stroke:#155724
    style N fill:#d4edda,stroke:#155724
    style I fill:#fdebd0,stroke:#e59866
    style L fill:#fdebd0,stroke:#e59866
    style B_raw fill:#fef9e7,stroke:#b08d57
    style Q_report fill:#fef9e7,stroke:#b08d57
    style E_scores fill:#fef9e7,stroke:#b08d57
    style G_filtered fill:#fef9e7,stroke:#b08d57
    style J_export fill:#fef9e7,stroke:#b08d57
    style K_lib fill:#fef9e7,stroke:#b08d57
    style M_neut fill:#fef9e7,stroke:#b08d57
    style R_db fill:#fef9e7,stroke:#b08d57
    style O fill:#a3e4d7,stroke:#0e6251
    