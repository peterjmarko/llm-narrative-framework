graph TD
    subgraph "Input Data"
        direction LR
        Input_PDB["personalities_db<br/>1-5000.txt"]:::input
        Input_Query["base_query.txt"]:::input
        Input_Config["config.ini"]:::input
    end

    subgraph "Data Pipeline Stages"
        direction LR
        subgraph "1: Generation"
             Script1["build_queries.py"]:::script --> Art1["llm_query_XXX.txt"]:::artifact
             Script1 --> Art1_archive[("config.ini.archived")]:::artifact
        end
        subgraph "2-3: Execution & Processing"
            Script2["run_llm<br/>_sessions.py"]:::script --> Art2["llm_response<br/>_XXX.txt"]:::artifact
            Art2 --> Script3["process_llm<br/>_responses.py"]:::script --> Art3["all_scores.txt"]:::artifact
        end
        subgraph "4: Analysis"
             Script4a["compile_results.py"]:::script --> Art4["final_summary<br/>_results.csv"]:::artifact
             Art4 --> Script4b["run_anova.py"]:::script --> Art_Final(("Final Report<br/>Plots & Stats")):::final
        end
    end

    Input_PDB & Input_Query & Input_Config --> Script1
    Art1 --> Script2
    Art3 & Art1_archive --> Script4a
    
    classDef input fill:#cde4ff,stroke:#6c93be,color:#333
    classDef script fill:#ffe8d6,stroke:#e59866,color:#333
    classDef artifact fill:#e9ecef,stroke:#adb5bd,color:#333
    classDef final fill:#d4edda,stroke:#155724,color:#333 font-weight:bold
