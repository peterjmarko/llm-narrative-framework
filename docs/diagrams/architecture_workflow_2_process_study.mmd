graph TD;

    %% --- Style Definitions (Based on Original Palette) ---
    classDef WorkflowEntry fill:#1f77b4,stroke:#fff,stroke-width:2px,color:#fff;
    classDef Analysis fill:#17becf,stroke:#333,stroke-width:1px,color:#fff;
    classDef DataArtifact fill:#f0f0f0,stroke:#666,stroke-width:1px,stroke-dasharray: 5 5,color:#333;

    %% === Nodes for Workflow 2: Process a Study ===
    proc_study["process_study.ps1<br/><i>(Entry Point)</i>"]:::WorkflowEntry;
    
    subgraph "Stage 1: Data Aggregation"
        compile["compile_results.py"]:::Analysis;
        data_csv[("STUDY_results.csv<br/><i>(Master Data File)</i>")]:::DataArtifact;
    end
    
    subgraph "Stage 2: Statistical Analysis"
        direction LR
        anova["run_anova.py"]:::Analysis;
        subgraph "Generated Artifacts"
            log_file[("STUDY_analysis_log.txt")]:::DataArtifact;
            boxplots_dir[("Boxplots/")]:::DataArtifact;
            diag_plots_dir[("Diagnostics/")]:::DataArtifact;
        end
    end

    %% === Connections ===
    proc_study --> compile;
    compile -->|Generates| data_csv;
    data_csv -->|Analyzed by| anova;
    anova -->|Generates| log_file & boxplots_dir & diag_plots_dir;
