graph TD
    subgraph "Logic for generate_ocean_scores.py"
        A[Start] --> B{Load eminence scores};
        B --> C{Load existing OCEAN scores};
        C --> D{Filter out already processed subjects};
        D --> E{Any subjects to process?};
        E -- No --> K[Generate Final Report];
        E -- Yes --> F[Start Batch Processing Loop];
        
        subgraph "Batch Loop"
            F --> G[Construct prompt for batch];
            G --> H[Call LLM worker];
            H --> I[Parse response];
            I --> J[Append new scores to CSV];
            J --> F;
        end
        
        F -- Loop Complete --> K;
        
        K --> L{Reconcile: All subjects scored?};
        L -- No --> M[Halt with Error and Missing Report];
        L -- Yes --> N[End];
        M --> N;
    end