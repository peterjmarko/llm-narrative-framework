# pytest.ini
[pytest]
filterwarnings =
    ignore:Exact p-value calculation does not work if there are zeros:UserWarning
    ignore:Sample size too small for normal approximation:UserWarning
    ignore:Conversion of an array with ndim > 0 to a scalar is deprecated:DeprecationWarning
    ignore:divide by zero encountered in scalar divide:RuntimeWarning
    ignore:invalid value encountered in scalar divide:RuntimeWarning

# Enable pytest-cov for the 'src' directory and specify report formats.
# pytest-cov will automatically combine data from parallel runs if configured below.
addopts = --cov=src --cov-report=term-missing --cov-report=html

[coverage:run]
# This is the default data file name. When `parallel = true`, coverage.py will
# automatically append unique suffixes (e.g., .coverage.hostname.pid.random).
data_file = .coverage
# Specifies the directories/packages for which coverage data should be collected.
source = src
# Crucial for collecting coverage from subprocesses.
parallel = true
# Specifies the concurrency mechanism. 'multiprocessing' is needed for subprocesses.
concurrency = multiprocessing
# Specifies patterns for files/directories to omit from coverage analysis.
omit =
    */.venv/*
    */tests/*
    # Add any other specific temporary or irrelevant files/folders if warnings persist.
    # For example, if you see warnings about files in a specific 'test_retry_...' folder,
    # you might add: C:\Users\peter\AppData\Local\Temp\test_retry_*

[coverage:paths]
# This section helps coverage.py map collected file paths (especially from different environments
# or temporary locations) back to their canonical source locations.
# List all possible root directories where your source files might be found.
source =
    .
    src